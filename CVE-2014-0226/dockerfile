FROM ubuntu:latest
RUN apt-get update
#installing essential libraries
RUN apt-get -y install unzip wget git less subversion python3 curl 
RUN apt-get -y install libtool-bin libtool autoconf build-essential vim libxml2 libexpat1-dev libpcre3-dev
#Copying the apache file
COPY /apache/httpd-2.4.7 .
#getting the apache apr to run the exploit 
RUN svn co http://svn.apache.org/repos/asf/apr/apr/trunk srclib/apr
#Configuring with the apr
RUN ./buildconf
RUN ./configure --enable-mods-shared=reallyall --with-included-apr 
# installing httpd 2.4.7
RUN make
RUN make install
# COPY ./apache /etc/apache
# Copying out explot code
COPY ./cve_226.py .
# Setting the server status and extended status
RUN echo 'SetHandler server-status\nExtendedStatus On' >> /usr/local/apache2/conf/httpd.conf
EXPOSE 80